{% extends 'layouts/tutor.twig' %}
{% block title %}Location{% endblock %}

{% block content %}
    <div class="row-fluid" ng-app="MyApp" ng-controller="LocationController">
        <div class="col-md-12">
            <div class="content">
                <div class="heading">
                    <h1>Location</h1>
                </div>

                <div class="box">
                    <div class="title">
                        My Location
                    </div>
                </div>

                <div class="box_border">
                    <div class="form">
                        <div id="show_map">
                            ghh
                        </div>
                    </div>
                </div>


                <div class="box">
                    <div class="title">
                        Uplodate Location
                    </div>
                </div>

                <div class="box_border">
                    <div class="form">
                        <table>
                            <tr>
                                <td><button class="submit_btn">Update Current Location</button> </td>
                            </tr>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>



{% endblock %}
{% block javascripts %}
    <script src="{{ asset('front/js/angular.min.js') }}"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script>
        var app=angular.module('MyApp',[]);
        app.controller('LocationController',function($scope,$http){
           $scope.show_map=false;
           $scope.items=[];

           $http.get('{{ url_to('tpanel/document/mylocation') }}').success(function(data){
               if(data.length > 0){

                   if(navigator.geolocation)
                   {
                       navigator.geolocation.getCurrentPosition(showCurrentLocation);
                   }
                   else
                   {
                       alert('geo location not fount');
                   }

               }
           }).error(function(data){
               console.log(data);
           });

            function showCurrentLocation(position)
            {
                var longitude=position.coords.longitude;
                var latitude=position.coords.latitude;
                var coords = new google.maps.LatLng(latitude, longitude);

                alert(coords);
                var mapOption= {
                    zoom:15,
                    center:coords,
                    mapTypeControl:true,
                    streetViewControl: false,
                    mapTypeId:google.maps.MapTypeId.ROADMAP
                };
                map=new google.maps.Map(
                        document.getElementById('show_map'),mapOption
                );

                var marker = new google.maps.Marker({
                    position: coords,
                    map: map,
                    title: "Current location!"
                });

                marker.setMap(map);


                var infowindow = new google.maps.InfoWindow({
                    content:"Hello World!"
                });
                infowindow.open(map,marker);
             }

        });
    </script>

{% endblock %}
{% block stylesheets  %}
    <style>
        #show_map{
            width: 500px;
            height:500px;
        }
    </style>
{% endblock %}
