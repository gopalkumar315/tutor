{% extends 'layouts/front.twig' %}

{% block breadcrumb %}
    <div class="breadcrumb">
        <a href="{{ url_to('index/signup') }}" title="Sign Up">Sign Up</a>
    </div>
{% endblock %}

{% block content %}
    <div class="p_heading">
        <h1>Sign Up to Mytutor</h1>
        <p>If you are a tutor or student looking to make full use of Mytutor please fill in the form below. If any
            student / tutor viewing this site searches for your criteria, we will give them the opportunity to contact
            you. </p>
    </div>

    <div class="col-md-8" style="padding:0px; "  >

        <div class="signup">

            {% if session_has('success') %}
                <div class="success_alert">{{ session_get('success') }}</div>
            {% endif %}

            <form onsubmit="return validate()" name="myform" action="{{ url_to('tutor/signup') }}" method="post">
                <div class="pi">
                    <div class="title">Personal Information</div>
                </div>

                <div class="form">

                    <br/>
                    <table>
                        <tr>
                            <td>Title</td>
                            <td>
                                <select class="select" name="title" id="">
                                    <option value="">Select:</option>
                                    <option value="Mr">Mr</option>
                                    <option value="Miss">Miss</option>
                                    <option value="Mrs">Mrs</option>
                                    <option value="Dr">Dr</option>
                                    <option value="Prof">Prof</option>
                                    {% if input_old('title') %}
                                        <option value="{{ input_old('title') }}" selected>{{ input_old('title') }}</option>
                                    {% endif %}
                                </select>
                            </td>
                        </tr>

                        <tr>
                            <td>First Name</td>
                            <td>
                                <input type="text" value="{{ input_old('first_name') }}" name="first_name"
                                       class="txt_box"/>

                                <div class="error">
                                    {{ errors.first('first_name') }}
                                </div>
                            </td>

                        </tr>

                        <tr>
                            <td>Last Name</td>
                            <td><input type="text" value="{{ input_old('last_name') }}" name="last_name"
                                       class="txt_box"/>

                                <div class="error">
                                    {{ errors.first('last_name') }}
                                </div>
                            </td>

                        </tr>

                        <tr>
                            <td>Gender</td>
                            <td>
                                <select class="select" style="margin-top:3px;" name="gender" id="">
                                    <option value="">Gender :</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                            </td>

                        </tr>


                        <tr>
                            <td>Email Address</td>
                            <td>
                                <input type="text" name="email" value="{{ input_old('email') }}" class="txt_box"/>
                                <div class="error">
                                    {{ errors.first('email') }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Address 1</td>
                            <td>
                                <input type="text" value="{{ input_old('address1') }}" name="address1" class="txt_box"/>

                                <div class="error">
                                    {{ errors.first('address1') }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Address 2 (optional)</td>
                            <td><input type="text" value="{{ input_old('address2') }}" name="address2" class="txt_box"/>
                            </td>
                        </tr>


                        <tr>
                            <td>County</td>
                            <td>
                                <select class="select" name="country" id="">
                                    <option value="">Country :</option>
                                    <option value="India">India</option>
                                    {% if input_old('country') %}
                                        <option value="{{ input_old('country') }}" selected>{{ input_old('country') }}</option>
                                    {% endif %}
                                </select>
                            </td>
                        </tr>

                        <tr>
                            <td>State</td>
                            <td>
                                <select class="select" style="margin-top:3px;" ng-model="state" ng-change="cities()" name="state" id="">
                                    <option ng-repeat="item in items" value="{{ '{{ item.state }}' }}">{{ '{{ item.state}}' }}</option>
                                    <option value="">State :</option>
                                </select>
                            </td>
                        </tr>

                        <tr>
                            <td>City</td>
                            <td>
                                <select class="select" style="margin-top:3px;" name="city" id="">
                                    <option value="">City :</option>
                                    <option ng-repeat="item in state_cities" value="{{ '{{ item.city_name }} ' }}">{{ '{{ item.city_name }} ' }}</option>
                                </select>
                            </td>
                        </tr>

                        <tr>
                            <td>Postcode</td>
                            <td>
                                <input type="text" name="postcode" value="{{ input_old('postcode') }}" class="txt_box"/>
                                <div class="error">
                                    {{ errors.first('postcode') }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Phone Number (home)</td>
                            <td><input type="text" value="{{ input_old('phone') }}" name="phone" class="txt_box"/>

                                <div class="error">
                                    {{ errors.first('phone') }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Phone Number (mobile)</td>
                            <td>
                                <input type="text" value="{{ input_old('mobile') }}" name="mobile" class="txt_box"/>

                                <div class="error">
                                    {{ errors.first('mobile') }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Date of Birth</td>
                            <td>
                                <select class="date_select" style="margin-top:3px;" name="day" id="">

                                    <option value="" >day</option>
                                    <script>
                                        for(var i=1;i<=31;i++)
                                        document.write("<option value=\""+i+"\">"+i+"</option>");
                                    </script>
                                </select>

                                <select class="date_select" style="margin-top:3px;" name="month" id="">
                                    <option value="" >month</option>
                                    <option value="01">January</option>
                                    <option value="02">February</option>
                                    <option value="03">March</option>
                                    <option value="04">April</option>
                                    <option value="05">May</option>
                                    <option value="06">June</option>
                                    <option value="07">July</option>
                                    <option value="08">August</option>
                                    <option value="09">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>

                                <select class="date_select" style="margin-top:3px;" name="year" id="">
                                    <option value="">year</option>
                                    <script>
                                        for(var i=2010;i>=1950;i--)
                                        document.write("<option value=\""+i+"\">"+i+"</option>");
                                    </script>
                                </select>
                            </td>
                        </tr>

                    </table>
                    <br/>
                </div>

                <br/>
                {#Username#}
                <div class="pi">
                    <div class="title">Account Information</div>
                </div>

                <div class="form">
                    <br/>
                    <table>

                        <tr>
                            <td>Username</td>
                            <td>
                                <input type="text" value="{{ input_old('username') }}" name="username" class="txt_box"/>

                                <div class="error">
                                    {{ errors.first('username') }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Password</td>
                            <td>
                                <input type="password" name="password" class="txt_box"/>

                                <div class="error">
                                    {{ errors.first('password') }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Confirm Password</td>
                            <td>
                                <input type="password" name="password_confirm" class="txt_box"/>

                                <div class="error">
                                    {{ errors.first('password_confirm') }}
                                </div>
                            </td>
                        </tr>

                    </table>
                    <br/>
                </div>


                <br/>
                {#other information#}
                <div class="pi">
                    <div class="title">Other Information</div>
                </div>

                <div class="form">
                    <br/>
                    <table>

                        <tr>
                            <td>Comments about yourself*</td>
                            <td>
                                <textarea  class="textarea" name="description" id="" cols="30" rows="10">{{ input_old('description') }}</textarea>

                                <div class="error">
                                    {{ errors.first('description') }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Your Availability*</td>
                            <td>
                                <textarea class="textarea" name="availability" id="" cols="30" rows="2">{{ input_old('availability') }}</textarea>

                                <div class="error">
                                    {{ errors.first('availability') }}
                                </div>
                            </td>
                        </tr>

                    </table>
                    <br/>
                </div>

                <div class="submit">
                    <br/>
                    <i>All the fields are required.</i>

                    <p>I agree to Tutor Hunt's <a href="#">Terms & Conditions</a> <input type="checkbox"
                                                                                         name="agreement"
                                                                                         class="check_box"/></p>
                    <input type="submit" value="Register" class="submit_btn"/>
                </div>
            </form>
        </div>


    </div>
{% endblock %}

{% block javascript %}
    <script>
        function validate(){

            if(document.myform.title.value== '' || document.myform.title.value== null ){
                alert('please select title');
                return false;
            }

            if(document.myform.country.value== '' || document.myform.country.value== null ){
                alert('please select country');
                return false;
            }

            if(document.myform.city.value== '' || document.myform.city.value== null ){
                alert('please select city');
                return false;
            }

            if(document.myform.day.value== '' || document.myform.day.value== null ){
                alert('please select day');
                return false;
            }

            if(document.myform.month.value== '' || document.myform.month.value== null ){
                alert('please select month');
                return false;
            }

            if(document.myform.year.value== '' || document.myform.year.value== null ){
                alert('please select year');
                return false;
            }

            if(document.myform.gender.value== '' || document.myform.gender.value== null ){
                alert('please select gender');
                return false;
            }

            if(document.myform.state.value== '' || document.myform.state.value== null ){
                alert('please select state');
                return false;
            }

            if(document.myform.agreement.checked == false) {
                alert('You must agree to our Terms of Service ');
                return false;
            }




        }
    </script>

    {#<script src="{{ asset('front/js/angular.min.js') }}"></script>#}
    <script>
        var app=angular.module('MyApp',[]);
        app.controller('mycontroller',function($scope,$http){
            $scope.items=[];
            $scope.state_cities=[];

            $http.get('{{ url_to('tutor/state') }}').success(function(data){
                $scope.items=data;
            }).error(function(data){
                console.log(data);
            })

            $scope.cities=function(){
                $scope.data={'state':$scope.state};
                $http.post('{{ url_to('tutor/cities') }}',$scope.data).success(function(data){

                     $scope.state_cities=data;
                }).error(function(data){
                    console.log(data)
                });
            }
        });
    </script>
{% endblock %}
